import socket

def print_menu():
    print("""\n\n0) Close the connection
    1) Get system info
    2) List directory contents
    """)


srvAddr = input("[+] Server IP address >")
srvPort = int(input("[+] Server port >"))
print("[+] Trying to establish a connection...")
sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
sock.connect((srvAddr, srvPort))

print("[+] Connection established!")
print_menu()

while True:
    message = input("\n[+] Select an option: ")

    if (message == "0"):
        sock.sendall(message.encode())
        sock.close()
        break

    elif(message == "1"):
        sock.sendall(message.encode())
        data = sock.recv(1024)

        if not data:
            break
        print(data.decode('utf-8'))

    elif(message == "2"):
        path = input("[+] Insert path >")
        sock.sendall(message.encode())
        sock.sendall(path.encode())
        data = sock.recv(1024)
        data = data.decode('utf-8').split(",")
        print("*"*40)

        for i in data:
            print(i)
        print("*"*40)
        
    print_menu()
#conn, addr = sock.accept()

#conn.close()